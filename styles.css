/* === UI TOKENS & BASES (v2) === */
:root{
  --canvas:#f7f3ec;    /* page bg */
  --card:#ffffff;      /* card surface */
  --border:#e8e2d9;    /* soft border */
  --ink:#232323;       /* main text */
  --muted:#6b6b6b;     /* secondary text */
  --rail-bg:#fbf8f4;   /* right rail surface */
  --radius:16px;
  --radius-sm:12px;
  --space-1:8px; --space-2:12px; --space-3:16px; --space-4:24px;
}

html, body{ background:var(--canvas); color:var(--ink); }

/* Page grid with sticky rail */
.page{
  display:grid;
  grid-template-columns: minmax(16px,1fr) minmax(720px,920px) minmax(320px,420px) minmax(16px,1fr);
  gap:var(--space-4);
  align-items:start;
}
.main{ grid-column:2; }
.rail{
  grid-column:3;
  position:sticky; top:var(--space-3);
  background:var(--rail-bg);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:var(--space-3);
}
@media (max-width:1024px){
  .page{ grid-template-columns:16px 1fr 16px; }
  .main{ grid-column:2; }
  .rail{ grid-column:2; position:static; margin-top:var(--space-4); }
}

/* Cards */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:var(--space-3);
  box-shadow:0 1px 0 rgba(0,0,0,.02);
}
.card + .card{ margin-top:var(--space-3); }

/* Section headers */
.section-head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:var(--space-2); }
.section-title{ font-weight:600; font-size:1rem; letter-spacing:-0.01em; }
.subhead{ font-size:.9rem; font-weight:600; margin-bottom:var(--space-2); }
.link-action{ font-size:.875rem; text-decoration:underline; opacity:.8; background:none; border:0; cursor:pointer; }
.link-action:hover{ opacity:1; text-decoration:none; }

/* === Mini design system ================================================= */
:root{
  /* Brand */
  --purple-50:#F4E9FF; --purple-100:#E5D4FF; --purple-300:#C2A6FF;
  --purple-500:#7C4DFF; --purple-600:#6B3FFF; --purple-700:#5B34E0;
  --ink-900:#232323; --ink-700:#3A3A3A; --ink-500:#666; --ink-300:#9A9A9A;
  --bg:#FAF7F2; --card:#FFFFFF; --card-tint:#F6F2EA; --line:#EAE4D9;
  /* Radii, spacing, shadows */
  --r-lg:20px; --r-md:14px; --r-sm:10px;
  --space-2:8px; --space-3:12px; --space-4:16px; --space-5:20px; --space-6:24px; --space-8:32px;
  --shadow:0 6px 20px rgba(20,20,20,.06);
}

body{ background:var(--bg); color:var(--ink-900); }

/* Cards */
.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:var(--r-lg);
  padding:var(--space-6);
  box-shadow:var(--shadow);
}
.section + .section{ margin-top:var(--space-8); }

/* Grid layout */
.page{
  display:grid;
  grid-template-columns:1fr 380px; /* main | timeline */
  gap:var(--space-8);
  align-items:start;
}
.timeline{ position:sticky; top:16px; }

/* Typography */
.h1{ font-size:28px; font-weight:800; color:var(--ink-900); letter-spacing:-0.01em; }
.h2{ font-size:18px; font-weight:700; color:var(--ink-900); }
.subtle{ font-size:12px; color:var(--ink-300); }
.body{ font-size:14px; color:var(--ink-700); }

/* Pills & buttons */
.pill{
  display:inline-flex; align-items:center; gap:8px;
  height:32px; padding:0 12px;
  border-radius:999px; border:1px solid var(--line); background:#fff;
  font:600 12px/1.2 system-ui; color:var(--ink-700);
}
.pill.is-primary{ background:var(--purple-50); border-color:var(--purple-100); color:var(--purple-700); }
.pill.is-ghost{ background:transparent; }

.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:10px;
  height:40px; padding:0 16px; border-radius:999px; border:0; cursor:pointer;
  font:600 14px/1 system-ui;
}
.btn-primary{ background:var(--purple-600); color:#fff; }
.btn-primary:hover{ background:var(--purple-700); }
.btn-ghost{ background:transparent; color:var(--purple-600); }

input[type="time"],
input[type="number"]{
  border-radius:var(--r-sm); border:1px solid var(--line); padding:10px 12px;
}

/* Status dot */
.status-dot{
  width:10px;height:10px;border-radius:50%;
  background:var(--purple-600); box-shadow:0 0 0 3px var(--purple-50);
}

:focus-visible{ outline:3px solid var(--purple-300); outline-offset:2px; }
*{ transition: all .12s ease-out; }

/* Weather */
.weather .temp{ font-size:80px; font-weight:800; color:#6B7B5E; letter-spacing:-0.03em; }
.weather .meta{ display:flex; gap:var(--space-5); color:var(--ink-500); }
.weather .hourly{ display:flex; gap:10px; flex-wrap:wrap; }
.weather .hour{ border:1px dashed var(--line); border-radius:999px; padding:6px 10px; }

/* Leave plan */
.leave-plan .card{ position:relative; }
.leave-plan .card::before{
  content:""; position:absolute; inset:0 0 auto 0; height:8px;
  background:linear-gradient(90deg,var(--purple-100),transparent 60%);
  border-top-left-radius:var(--r-lg); border-top-right-radius:var(--r-lg);
}
.leave-plan .row{ display:grid; grid-template-columns: 1fr repeat(2, 140px); gap:var(--space-5); }

/* Backpacks */
.pack-chip{
  display:inline-flex; align-items:center; gap:8px;
  height:32px; padding:0 12px;
  border-radius:999px; border:1px solid var(--line); background:#fff;
  font:600 12px/1.2 system-ui; color:var(--ink-700); user-select:none;
}
.pack-chip.is-on{ background:var(--purple-600); color:#fff; border-color:var(--purple-600); }

/* Timeline */
.timeline{
  background:linear-gradient(#fff, var(--card-tint));
  border:1px solid var(--line); border-radius:var(--r-lg); padding:var(--space-5);
}
.timeline .rail{ position:relative; margin-left:18px; }
.timeline .rail::before{
  content:""; position:absolute; left:0; top:0; bottom:0; width:2px; background:#E6E2D8; border-radius:2px;
}
.timeline .step{
  display:grid; grid-template-columns: 48px 1fr auto; gap:12px; align-items:center;
  padding:12px; margin:10px 0; background:#fff; border:1px solid var(--line); border-radius:14px;
}
.timeline .time{
  width:48px; height:48px; border-radius:999px; display:grid; place-items:center;
  background:var(--purple-50); color:var(--purple-700); font-weight:700;
}
.timeline .step.is-current{ border-color:var(--purple-300); box-shadow:0 0 0 3px var(--purple-50) inset; }
.timeline .remove{ width:28px; height:28px; border-radius:999px; border:1px solid var(--line); background:#fff; }

/* Class schedules */
.class-actions{ display:flex; gap:10px; flex-wrap:wrap; }
.class-actions .btn, .class-actions .pill{ height:32px; }


/* Inputs */
.input-group{ display:grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap:var(--space-2); }
.field{ display:block; }
.label{ display:block; font-size:.75rem; color:var(--muted); }
.input{
  margin-top:4px; width:100%; height:42px;
  padding:0 var(--space-2);
  border:1px solid var(--border);
  border-radius:var(--radius-sm);
  background:#fff;
  font-variant-numeric: tabular-nums;
  text-align:center;
}
.inline-unit{ opacity:.7; }

/* Backpacks */
.backpack-grid{ display:grid; grid-template-columns:1fr 1fr; gap:var(--space-3); }
.backpack{ background:var(--card); border:1px solid var(--border); border-radius:var(--radius); padding:var(--space-3); }
.chips{ display:flex; flex-wrap:wrap; gap:var(--space-1); }
.chip{
  height:30px; padding:0 var(--space-2);
  border:1px solid var(--border);
  border-radius:999px; background:transparent; cursor:pointer;
  font-size:.875rem; line-height:30px; color: var(--ink);
}
.chip[aria-pressed="true"]{ background:#f3f4f6; border-color:#ded8cf; }

/* Weather */
.weather .weather-head{ display:flex; align-items:center; justify-content:space-between; }
.weather-tiles{
  display:grid; grid-template-columns: repeat(5,minmax(0,1fr));
  gap:var(--space-1); margin-top:var(--space-2);
}
.weather-tiles .tile{
  height:64px; border:1px solid var(--border); border-radius:var(--radius-sm);
  display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center;
}

/* Timeline tweaks (match current classes) */
.timeline{ display:flex; flex-direction:column; gap:12px; }
.timeline .timeline-item{ border-radius:var(--radius-sm); }
.timeline .timeline-item.warning{ background:#fff5f2; }

/* Hide buffers sentence visually (logic preserved) */
.leave-buffers{
  position:absolute !important; width:1px; height:1px; overflow:hidden;
  clip:rect(1px,1px,1px,1px);
}
/* === HOTFIX — 2025-08-29 17:22 === */
/* Restore timeline card styling (your DOM uses .task) */
#timeline-rail .task{
  display:grid;
  grid-template-columns:56px 1fr 28px; /* time badge | content | action */
  align-items:center;
  gap:12px;
  min-height:56px;
  padding:12px 16px;
  background:#fff;
  border:1px solid var(--border);
  border-radius:var(--radius-sm);
  box-sizing:border-box;
}
#timeline-rail .task + .task{ margin-top:12px; }

/* Left-rail time circles: smaller type, sage colour */
#timeline-rail .task .time{
  width:44px; height:44px; border-radius:999px;
  display:grid; place-items:center;
  background: rgba(156,171,134,.18);         /* sage fill */
  border:1px solid #9CAB86;                   /* sage border */
  color:#444; font-size:12px; font-weight:600; line-height:1;
}

/* Remove duplicate time copy inside cards if present */
#timeline-rail .task .time-inline{ display:none !important; }

/* Keep medication/highlight tint intact */
#timeline-rail .task.med,
#timeline-rail .task.warning{
  background:#FFF3F3; border-color:#FFD5D5;
}

/* Scope weather icon so it can't blow up in the rail */
#weather-card .wx-icon{ font-size:42px; }
#timeline-rail .wx-icon{ display:none !important; }

/* Leave plan: compact, centred inputs */
#leave-plan .input{ height:40px; text-align:center; }

/* Hide “buffers” sentence visually (logic preserved) */
.leave-buffers{
  position:absolute !important; width:1px; height:1px; overflow:hidden;
  clip:rect(1px,1px,1px,1px);
}

/* Backpack chips: dark text (not blue) */
#backpacks .chip{ color:#232323; }
/* === SAFE UI TWEAKS — 2025-08-29 === */

/* 1) Morning Timeline — scoped to the right rail */
#timeline-rail .task{
  display:grid; grid-template-columns:56px 1fr 28px;
  align-items:center; gap:12px;
  min-height:56px; padding:12px 16px;
  background:#fff; border:1px solid var(--border);
  border-radius:12px; box-sizing:border-box;
}
#timeline-rail .task + .task{ margin-top:12px; }

/* left-rail time badge: smaller text + sage */
#timeline-rail .task .time{
  width:44px; height:44px; border-radius:999px;
  display:grid; place-items:center;
  background: rgba(156,171,134,.18);       /* sage fill */
  border:1px solid #9CAB86;                 /* sage border */
  color:#444; font-size:12px; font-weight:600; line-height:1;
}

/* hide duplicate time printed inside the card content, if present */
#timeline-rail .task .time-inline,
#timeline-rail .task .meta-time{ display:none !important; }

/* keep medication highlight intact if you have it */
#timeline-rail .task.med{ background:#FFF3F3; border-color:#FFD5D5; }

/* 2) Leave plan — compact, centred inputs; hide buffers text */
#leave-plan .input{
  height:40px; text-align:center;
  border-radius:12px;
}
#leave-plan .input-group{ display:grid; grid-template-columns:1fr 120px 120px; gap:16px; }
.leave-buffers{
  position:absolute !important; width:1px; height:1px; overflow:hidden;
  clip:rect(1px,1px,1px,1px);
}

/* 3) Backpacks — chip look using existing checkboxes (no DOM change) */
#backpacks .checklist,
#backpacks .list{ display:flex; flex-wrap:wrap; gap:8px 8px; }

#backpacks label{                 /* assume label wraps the input+text */
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 12px; height:30px; line-height:30px;
  border:1px solid var(--border); border-radius:999px;
  background:#fff; color:#232323; cursor:pointer;
}

/* hide the native box but keep it accessible */
#backpacks input[type="checkbox"]{
  position:absolute; inline-size:1px; block-size:1px; overflow:hidden;
  clip:rect(1px,1px,1px,1px); white-space:nowrap;
}

/* pressed state when checked — reduces emphasis */
#backpacks label:has(input:checked){
  background:#f3f4f6; border-color:#ded8cf; opacity:.6;
}

/* 4) Minor: ensure link-action looks subdued and consistent */
.link-action{ font-size:.875rem; text-decoration:underline; opacity:.8; background:none; border:0; cursor:pointer; }
.link-action:hover{ opacity:1; text-decoration:none; }
